<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/Private/layout.xhtml">

    <ui:define name ="title">Registro de usuario</ui:define>

    <ui:define name ="header"><ui:include src="/Private/header.xhtml"/></ui:define>

    <ui:define name ="body">     
        <p:layoutUnit position="center">  
            <ui:insert name="centro">
                <p:spacer></p:spacer>
                <h:form>
                    <p:messages id="msg" showDetail="false" closable="true"/>
                    <p:panel header="Registro" style="width: 700px;">
                        <h:panelGrid  columns="3" border="0" style="width: 80%;">

                            <p:spacer></p:spacer>
                            <p:spacer></p:spacer>
                            <p:spacer></p:spacer>

                            <h:outputText value="Nombre usuario "></h:outputText>
                            <p:inputText id="nombreUsuario" value="#{usuarios.nombreUsuario}" required="true" 
                                         requiredMessage="Debe ingresar un nombre de usuario."
                                         validatorMessage="El nombre de usuario debe tener entre 5 y 15 caracteres.">
                                <f:validateLength minimum="5" maximum="15" for="nombreUsuario"></f:validateLength>   
                            </p:inputText>
                            <p:spacer></p:spacer>

                            <h:outputText value="Contraseña "></h:outputText>
                            <p:password id="contrasenia" value="#{usuarios.contrasenia}" required="true" 
                                        requiredMessage="Debe ingresar una contraseña."
                                        validatorMessage="Las constraseñas deben coincidir y tener entre 5 - 15 caracteres."
                                        match="confContrasenia" feedback="true">
                                <f:validateLength minimum="5" maximum="15" for="contrasenia"></f:validateLength>   
                            </p:password>
                            <p:spacer></p:spacer>

                            <h:outputText value="Confirmar Contraseña "></h:outputText>
                            <p:password id="confContrasenia" value="#{usuarios.confContrasenia}"></p:password>
                            <p:spacer></p:spacer>

                            <h:outputText value="Nombre "></h:outputText>
                            <p:inputText id="nombre" value="#{usuarios.nombre}" required="true" 
                                         requiredMessage="Debe ingresar un nombre."></p:inputText>
                            <p:spacer></p:spacer>

                            <h:outputText value="Apellido "></h:outputText>
                            <p:inputText id="apellido" value="#{usuarios.apellido}" required="true" 
                                         requiredMessage="Debe ingresar un apellido."></p:inputText>     
                            <p:spacer></p:spacer>

                            <h:outputText value="Dirección "></h:outputText>
                            <p:inputText id="direccion" value="#{usuarios.direccion}" required="true" 
                                         requiredMessage="Debe ingresar una dirección."></p:inputText>  
                            <p:spacer></p:spacer>

                            <h:outputText value="Teléfono "></h:outputText>
                            <p:inputText id="telefono" value="#{usuarios.telefono}" required="true" 
                                         requiredMessage="Debe ingresar un teléfono."></p:inputText> 
                            <p:spacer></p:spacer>

                            <h:outputText value="Email "></h:outputText>
                            <p:inputText id="email" value="#{usuarios.email}" required="true" 
                                         requiredMessage="Debe ingresar un email."
                                         validatorMessage="Formato de email no válido.">
                                <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]"></f:validateRegex>   
                            </p:inputText>       
                            <p:spacer></p:spacer>

                            <br></br>
                            <br></br>

                            <p:commandButton id="confirmarRegistroButton" value="Confirmar" 
                                             actionListener="#{usuarios.registrarUsuario}"   
                                             update="msg" oncomplete="handleRegisterRequest(xhr, status, args)"/>  

                        </h:panelGrid>
                    </p:panel>
                </h:form>

                <script type="text/javascript">
                    //<![CDATA[
                    function handleRegisterRequest(xhr, status, args) {
                        if (args.registroExitoso) {
                            window.location = args.urlRedireccion;
                        }
                    }
                    //]]>
                </script>  

            </ui:insert>
        </p:layoutUnit>  
    </ui:define>

    <ui:define name ="footer"><ui:include src="/Private/footer.xhtml"/></ui:define>

</ui:composition>